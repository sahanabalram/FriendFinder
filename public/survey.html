<!DOCTYPE html>
<html>

<head>
    <title>FriendFinder</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="stylesheet/style.css">
    <script>
        function onSubmit() {
            var selectedAnswer = [];
            var photo = $("#photo").val();
            var name = $("#name").val();
            for (var i = 0; i < questions.length; i++) {
                selectedAnswer.push(parseInt($("#q" + i).val()));
            }
            console.log(selectedAnswer);

            $.post("/api/friends", {
                    "name": name,
                    "scores": selectedAnswer,
                    "photo": photo
                })
                .done(function (data) {
                    alert("Data Loaded: " + data);
                });
        }

        var questions = ["Do you like pets", "Do you like to go and watch horror movies", "Do you like reading books",
            "Do you like nature",
            "Do you like to go for hikes", "Do you like to travel around the world",
            "Do you like to go on long drives", "Does your mind think about what is happening around the world",
            "Do you rely more on your imagination or reality", "Do you like to go for theatrical play"
        ];
        var options = ["Select an Option", "1 (Strongly Disagree)", "2", "3", "4", "5 (Strongly Agree)"];

        function populateQuestion() {
            $("#questions").append("<h4><strong>Questions</strong></h4>");
            for (var i = 0; i < questions.length; i++) {
                $("#questions").append("<h4>" + (i + 1) + " " + questions[i] + "</h4>");
                $("#questions").append("<select id=q" + i + "></select>");
                for (var j = 0; j < options.length; j++) {
                    $("#q" + i).append("<option value=" + j + ">" + options[j] + "</option>");
                }
            }
            $("#questions").append(
                '<button class="btn btn-info btn-lg btn-block" id="submit-button" onClick="onSubmit()"><span class="glyphicon glyphicon-ok-circle"</span> Submit </button>'
            );
            $("#questions").append("<hr>");
        }
        $(document).ready(function () {
            populateQuestion();
        });
    </script>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-12">
                <h1 class="text-center">Survey Questions</h1>
                <hr>
            </div>
        </div>
        <div class="jumbotron">
            <h2>
                <strong>About You</strong>
            </h2>
            <h4>
                <span class="glyphicon glyphicon-asterisk"></span> Name
                <input type="text" name id="name" class="form-control" required>
            </h4>

            <h4>
                <span class="glyphicon glyphicon-asterisk"></span> Link to your photo image
                <input type="text" name id="photo" class="form-control" required>
            </h4 <hr>
            <div id="questions">
            </div>
        </div>
        <footer class="footer">
            <div class="container">
                <p><a href="/api/friends" id="clear">API Friends List</a> | <a href="https://github.com/sahanabalram">GitHub Repo</a></p>
            </div>
        </footer>
</body>

</html>